# Production Environment Variables Template
# Copy this file to .env.production and fill in the actual values
# DO NOT commit .env.production to version control

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
# These values are used by the outbox-api service
# For production, use a strong password and consider using AWS RDS or Secrets Manager
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DB_NAME=outbox
DB_SSLMODE=disable

# =============================================================================
# Outbox API Configuration
# =============================================================================
PORT=8080
WEBHOOK_URL=http://portfolio:3000/api/webhook

# Feature Flags Integration
FEATURE_FLAGS_API_URL=http://feature-flags-api:4000
FEATURE_FLAGS_ENV=prod

# CORS Configuration
# Comma-separated list of allowed origins (include production domain)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://portfolio:3000,https://YOUR_DOMAIN.com

# =============================================================================
# Feature Flags API Configuration
# =============================================================================
# CORS Configuration (same as outbox-api)
# CORS_ALLOWED_ORIGINS is set in docker-compose.yml for feature-flags-api

# =============================================================================
# Portfolio UI Configuration (Next.js)
# =============================================================================
NODE_ENV=production

# Internal API URLs (used by Next.js API routes)
OUTBOX_API_URL=http://outbox-api:8080
FEATURE_FLAGS_API_URL=http://feature-flags-api:4000
OBSERVABILITY_API_URL=http://observability-api:8081

# Public API URLs (exposed to browser, must be accessible from client)
# For production behind Caddy, these should use the public domain
NEXT_PUBLIC_OUTBOX_API_URL=https://api.YOUR_DOMAIN.com/outbox
NEXT_PUBLIC_OBSERVABILITY_API_URL=https://api.YOUR_DOMAIN.com/observability

# =============================================================================
# Caddy Configuration
# =============================================================================
# Domain and email are configured in Caddyfile via deploy.sh
# DOMAIN=YOUR_DOMAIN.com
# EMAIL=your-email@example.com

# =============================================================================
# Optional: Advanced Configuration
# =============================================================================
# These have defaults and typically don't need to be set

# Outbox API Publishing Configuration
# BATCH_SIZE=10
# BATCH_TIMEOUT=5s
# RETRY_ATTEMPTS=3
# RETRY_DELAY=1s
# MAX_RETRY_DELAY=30s

# Circuit Breaker Configuration
# CIRCUIT_MAX_REQUESTS=5
# CIRCUIT_INTERVAL=10s
# CIRCUIT_TIMEOUT=5s

# Server Timeouts
# READ_TIMEOUT=30s
# WRITE_TIMEOUT=30s

# =============================================================================
# Security Notes
# =============================================================================
# 1. Change DB_PASSWORD to a strong, unique password before deployment
# 2. Consider using AWS Secrets Manager or Parameter Store for sensitive values
# 3. Never commit .env.production to version control
# 4. Rotate passwords regularly
# 5. Use different passwords for different environments

